## Repository 
Задача обеспечить персистентность уровня `DataMapper` обьектов от доменного слоя модели.
Т.е. изолировать изменения в моделях бизнес логики от способа построения карты обьекта с постоянного места хранилища. 

## DataMapper 
Задача обеспечить независимость модели предметной области от способа хранения в постоянном хранилище.
Решение задачи с графом циклических ссылок на обьекты. 

**В этой реализации DataMapper использует `IdentityMap` хотя не должен знать о обьектах в памяти и о обьектах в базе,
верная реализация этого паттерна находится в реализации `UnitOfWork` (этого репозитория).**

Также следует убрать зависимость реализации `DataMapper`'ов от конкретной реализации базы данных.
Также следует настроить слой обмена сущностей на DTO обьекты сущностей.
Также нужена реализация паттерна `Metadata Mapping`, описывающего связь между содержимым хранилища 
(к примеру таблицами и столбцами базы данных) и классами / свойствами объектов.
Также, если данные в хранилище не являются независимыми (к примеру связи между таблицами в базе данных) - может 
потребоваться реализации ряда паттернов, отвечающих за сохранение информации о связях между данными 
(это паттерны раздела [Object-Relational Structural Patterns] в каталоге паттернов)

[Object-Relational Structural Patterns]
Identity Field (216), Foreign Key Mapping (236), Association Table Mapping (248), Dependent Mapping (262), 
Embedded Value (268), Serialized LOB (272), Single Table Inheritance (278), Class Table Inheritance (285), 
Concrete Table Inheritance (293), Inheritance Mappers (302).


## IdentityMap
Задача обеспечить единственный экземплер/ссылку в системе
Реализуется с помощью обьекта `SplObjectStorage`

## UnitOfWork
Как результат слияния (`IdentityMap`+`DataMapper`+`Repository`) по изоляции модели бизнес логики от базы данных.
Задача обеспечить контроль над корректным состоянием обьекта при сохранении и обновлении за одну операцию/транзакцию.
Тогда уменьшается количество запросов в базу данных для получения текущего состояния обьекта.


[Object-Relational Structural Patterns]:(https://www.martinfowler.com/eaaCatalog/index.html) 
